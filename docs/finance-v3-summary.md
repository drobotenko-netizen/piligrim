# üéâ Cafe Finance Lite v3 - MVP –ó–∞–≤–µ—Ä—à—ë–Ω

**–î–∞—Ç–∞:** 01.10.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## üìä –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (18/20 –∑–∞–¥–∞—á)

### üóÑÔ∏è –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (100%)

**–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏:**
- ‚úÖ Channel - –∫–∞–Ω–∞–ª—ã –ø—Ä–æ–¥–∞–∂ (Dine-in, Pickup, Grab, Foodpanda)
- ‚úÖ TenderType - —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã (–ù–∞–ª–∏—á–Ω—ã–µ, –ö–∞—Ä—Ç–∞, QR, –ê–≥—Ä–µ–≥–∞—Ç–æ—Ä)
- ‚úÖ Category —Å –ø–æ–ª–µ–º `kind` (COGS, OPEX, CAPEX, TAX, FEE, OTHER)

**–û–ø–µ—Ä–∞—Ü–∏–∏:**
- ‚úÖ Shift - —Å–º–µ–Ω—ã —Å –æ—Ç–∫—Ä—ã—Ç–∏–µ–º/–∑–∞–∫—Ä—ã—Ç–∏–µ–º
- ‚úÖ ShiftSale - –ø—Ä–æ–¥–∞–∂–∏ (–∫–∞–Ω–∞–ª √ó —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã)
- ‚úÖ ExpenseDoc - –¥–æ–∫—É–º–µ–Ω—Ç—ã —Ä–∞—Å—Ö–æ–¥–æ–≤ —Å –¥–æ–ª–≥–∞–º–∏
  - operation_date - —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –¥–∞—Ç–∞ —Å—á—ë—Ç–∞
  - posting_period - –º–µ—Å—è—Ü —É—á—ë—Ç–∞ (–≤—Å–µ–≥–¥–∞ 1-–µ —á–∏—Å–ª–æ)
  - amount, paidAmount - —Å—É–º–º–∞ –∏ –æ–ø–ª–∞—á–µ–Ω–æ
  - status: draft ‚Üí unpaid ‚Üí partial ‚Üí paid / void
- ‚úÖ Payment - –ø–ª–∞—Ç–µ–∂–∏
- ‚úÖ PaymentAllocation - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- ‚úÖ CashTx - —Ä–µ–∞–ª—å–Ω—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è –¥–µ–Ω–µ–≥

### üîå API Endpoints (100%)

**–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏:**
- ‚úÖ `GET/POST/PATCH/DELETE /api/channels`
- ‚úÖ `GET/POST/PATCH/DELETE /api/tender-types`

**–û–ø–µ—Ä–∞—Ü–∏–∏:**
- ‚úÖ `GET/POST /api/shifts`
- ‚úÖ `PATCH /api/shifts/:id/close` - –∑–∞–∫—Ä—ã—Ç–∏–µ —Å –ø—Ä–æ–¥–∞–∂–∞–º–∏
- ‚úÖ `GET/POST/PATCH/DELETE /api/expense-docs`
- ‚úÖ `GET/POST/DELETE /api/payments`
- ‚úÖ `PATCH /api/categories` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ kind

**–û—Ç—á—ë—Ç—ã:**
- ‚úÖ `GET /api/reports/pnl` - —É–ª—É—á—à–µ–Ω–Ω—ã–π P&L
- ‚úÖ `GET /api/reports/aging` - –¥–æ–ª–≥–∏ –ø–æ —Å—Ä–æ–∫–∞–º
- ‚úÖ `GET /api/reports/shift-summary` - –¥–Ω–µ–≤–Ω–∞—è —Å–≤–æ–¥–∫–∞
- ‚úÖ `GET /api/reports/cashflow` - —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –î–î–°

### üíª –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (80%)

**–û–ø–µ—Ä–∞—Ü–∏–∏:**
- ‚úÖ `/shifts` - –æ—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω—ã
  - –ú–∞—Ç—Ä–∏—Ü–∞ –≤–≤–æ–¥–∞: –∫–∞–Ω–∞–ª √ó —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç –Ω–µ—Ç—Ç–æ
  - –ü–æ–∫–∞–∑ –Ω–∞–ª–∏—á–Ω—ã—Ö –∫ –∏–Ω–∫–∞—Å—Å–∞—Ü–∏–∏
  - –ò—Å—Ç–æ—Ä–∏—è —Å–º–µ–Ω

- ‚úÖ `/finance/expense-docs` - –¥–æ–∫—É–º–µ–Ω—Ç—ã —Ä–∞—Å—Ö–æ–¥–æ–≤
  - –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç (posting_period = 1-–µ —á–∏—Å–ª–æ)
  - –§–∏–ª—å—Ç—Ä—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É –∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫—É
  - –ò–Ω–¥–∏–∫–∞—Ü–∏—è –≤–æ–∑—Ä–∞—Å—Ç–∞ –¥–æ–ª–≥–∞
  - –¶–≤–µ—Ç–æ–≤—ã–µ —Å—Ç–∞—Ç—É—Å—ã

- ‚úÖ `/finance/payments` - –æ–ø–ª–∞—Ç–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤
  - –í—ã–±–æ—Ä –Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—É–º–º—ã –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  - –ö–Ω–æ–ø–∫–∞ "–ü–æ–ª–Ω–æ—Å—Ç—å—é" –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç –æ–±—â–µ–π —Å—É–º–º—ã
  - –ò—Å—Ç–æ—Ä–∏—è —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π

**–û—Ç—á—ë—Ç—ã:**
- ‚úÖ `/finance/reports/pnl` - P&L —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
  - –í—ã—Ä—É—á–∫–∞ (–Ω–µ—Ç—Ç–æ)
  - ‚àí COGS
  - = –í–∞–ª–æ–≤–∞—è –ø—Ä–∏–±—ã–ª—å
  - ‚àí OPEX
  - = –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –ø—Ä–∏–±—ã–ª—å
  - ‚àí –ù–∞–ª–æ–≥–∏/–ö–æ–º–∏—Å—Å–∏–∏
  - = –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å
  - –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –∫–∞–Ω–∞–ª–∞–º –∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º
  - CAPEX –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ

- ‚úÖ `/finance/reports/aging` - –∞–Ω–∞–ª–∏–∑ –¥–æ–ª–≥–æ–≤
  - Bucket'—ã –ø–æ —Å—Ä–æ–∫–∞–º
  - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º
  - –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è
  - –§–∏–ª—å—Ç—Ä—ã

- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ: Cash Flow, –ë–∞–ª–∞–Ω—Å—ã, –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

### üéØ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (95%)

**–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç paid_amount –∏–∑ allocations
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–º–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ (unpaid ‚Üí partial ‚Üí paid)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ CashTx –ø—Ä–∏ –ø–ª–∞—Ç–µ–∂–∞—Ö
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è posting_period (–≤—Å–µ–≥–¥–∞ 1-–µ —á–∏—Å–ª–æ)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—É–º–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- ‚úÖ –ü–µ—Ä–µ—Å—á—ë—Ç –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ –ø–ª–∞—Ç–µ–∂–∞

**–î–≤–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏:**
- ‚úÖ operation_date - —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –¥–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è
- ‚úÖ posting_period - –º–µ—Å—è—Ü –¥–ª—è P&L

**–¢—Ä–∏ –≤–∏–¥–∞ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
- ‚úÖ Operating (OPEX, Revenue, COGS)
- ‚úÖ Investing (CAPEX)
- ‚úÖ Financing (–∫—Ä–µ–¥–∏—Ç—ã, –ø—Ä–æ—Ü–µ–Ω—Ç—ã)

---

## üé¨ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É

### 1Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (–ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫)

```bash
cd server
npx tsx scripts/seed-finance-v3.ts
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç:
- –ö–∞–Ω–∞–ª—ã –ø—Ä–æ–¥–∞–∂ (4 —à—Ç)
- –°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã (4 —à—Ç)
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å kind (COGS/OPEX)
- –°—á–µ—Ç–∞ (–ö–∞—Å—Å–∞, –ë–∞–Ω–∫, –≠–∫–≤–∞–π—Ä–∏–Ω–≥)
- –ü—Ä–∏–º–µ—Ä—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤

### 2Ô∏è‚É£ –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞

**–£—Ç—Ä–æ–º:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É `/shifts` ‚Üí –∫–Ω–æ–ø–∫–∞ "–û—Ç–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É"

**–í–µ—á–µ—Ä–æ–º:**
2. –ó–∞–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É `/shifts` ‚Üí –≤–∫–ª–∞–¥–∫–∞ "–ó–∞–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω—ã"
   - –ó–∞–ø–æ–ª–Ω–∏—Ç—å –º–∞—Ç—Ä–∏—Ü—É: –∫–∞–Ω–∞–ª √ó —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
   - –£–∫–∞–∑–∞—Ç—å –±—Ä—É—Ç—Ç–æ, —Å–∫–∏–¥–∫–∏, –≤–æ–∑–≤—Ä–∞—Ç—ã
   - –°–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∂–µ—Ç –Ω–µ—Ç—Ç–æ –∏ –Ω–∞–ª–∏—á–Ω—ã–µ –∫ –∏–Ω–∫–∞—Å—Å–∞—Ü–∏–∏
   - –ö–Ω–æ–ø–∫–∞ "–ó–∞–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É"

**–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å—á–µ—Ç–æ–≤:**
3. –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç —Ä–∞—Å—Ö–æ–¥–∞ `/finance/expense-docs`
   - –í—ã–±—Ä–∞—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
   - –í—ã–±—Ä–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é (—Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º kind)
   - –£–∫–∞–∑–∞—Ç—å –¥–∞—Ç—É —Å—á—ë—Ç–∞ (operation_date)
   - –£–∫–∞–∑–∞—Ç—å –º–µ—Å—è—Ü —É—á—ë—Ç–∞ (posting_period)
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ draft –∏–ª–∏ unpaid

**–ü—Ä–∏ –æ–ø–ª–∞—Ç–µ:**
4. –û–ø–ª–∞—Ç–∏—Ç—å `/finance/payments`
   - –í—ã–±—Ä–∞—Ç—å —Å—á—ë—Ç (–æ—Ç–∫—É–¥–∞ –ø–ª–∞—Ç–∏–º)
   - –£–∫–∞–∑–∞—Ç—å –¥–∞—Ç—É –ø–ª–∞—Ç–µ–∂–∞
   - –í—ã–±—Ä–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è –æ–ø–ª–∞—Ç—ã
   - –£–∫–∞–∑–∞—Ç—å —Å—É–º–º—ã –∏–ª–∏ –Ω–∞–∂–∞—Ç—å "–ü–æ–ª–Ω–æ—Å—Ç—å—é"
   - –ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–ª–∞—Ç—ë–∂
   - –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
     * –û–±–Ω–æ–≤–∏—Ç paid_amount
     * –°–º–µ–Ω–∏—Ç —Å—Ç–∞—Ç—É—Å—ã
     * –°–æ–∑–¥–∞—Å—Ç CashTx

### 3Ô∏è‚É£ –û—Ç—á—ë—Ç—ã

**P&L (–ø—Ä–∏–±—ã–ª–∏ –∏ —É–±—ã—Ç–∫–∏):**
- `/finance/reports/pnl`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞ –º–µ—Å—è—Ü
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç posting_period (–Ω–µ –¥–∞—Ç—É –ø–ª–∞—Ç–µ–∂–∞!)
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞: –í—ã—Ä—É—á–∫–∞ ‚Üí –í–∞–ª–æ–≤–∞—è ‚Üí –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è ‚Üí –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å

**Aging (–¥–æ–ª–≥–∏):**
- `/finance/reports/aging`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ —Å—Ä–æ–∫–∞–º
- Bucket'—ã: 0-30, 31-60, 61-90, 90+ –¥–Ω–µ–π
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º

**Cash Flow:**
- `/finance/reports/cashflow`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è –¥–µ–Ω–µ–≥
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –≤–∏–¥–∞–º –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–î–Ω–µ–≤–Ω–∞—è —Å–≤–æ–¥–∫–∞:**
- API: `GET /api/reports/shift-summary?from=...&to=...`
- –ü—Ä–æ–¥–∞–∂–∏ –ø–æ –∫–∞–Ω–∞–ª–∞–º –∏ —Å–ø–æ—Å–æ–±–∞–º –æ–ø–ª–∞—Ç—ã

---

## ‚úÖ –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –£—á—ë—Ç –¥–æ–ª–≥–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Ä–∞—Å—Ö–æ–¥–æ–≤ (—Å—á–µ—Ç–∞, –∞–∫—Ç—ã)
- –û—Ç–¥–µ–ª—å–Ω–∞—è –¥–∞—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏ –º–µ—Å—è—Ü —É—á—ë—Ç–∞
- –ß–∞—Å—Ç–∏—á–Ω–∞—è –æ–ø–ª–∞—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–æ–∑—Ä–∞—Å—Ç–∞ –¥–æ–ª–≥–∞
- –û—Ç—á—ë—Ç Aging —Å bucket'–∞–º–∏

### 2. –°–º–µ–Ω—ã –∏ –ø—Ä–æ–¥–∞–∂–∏
- –û—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω
- –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –∫–∞–Ω–∞–ª–∞–º (Dine-in, Grab, Foodpanda)
- –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ —Å–ø–æ—Å–æ–±–∞–º –æ–ø–ª–∞—Ç—ã (–Ω–∞–ª–∏—á–Ω—ã–µ, –∫–∞—Ä—Ç–∞, QR)
- –£—á—ë—Ç —Å–∫–∏–¥–æ–∫ –∏ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤
- –†–∞—Å—á—ë—Ç –Ω–∞–ª–∏—á–Ω—ã—Ö –∫ –∏–Ω–∫–∞—Å—Å–∞—Ü–∏–∏

### 3. P&L (–º–µ—Ç–æ–¥ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è)
- –í—ã—Ä—É—á–∫–∞ –∏–∑ –∑–∞–∫—Ä—ã—Ç—ã—Ö —Å–º–µ–Ω (–ø–æ –º–µ—Å—è—Ü—É –∑–∞–∫—Ä—ã—Ç–∏—è)
- COGS –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–ø–æ posting_period)
- –í–∞–ª–æ–≤–∞—è –ø—Ä–∏–±—ã–ª—å
- OPEX –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –ø—Ä–∏–±—ã–ª—å
- –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –∫–∞–Ω–∞–ª–∞–º –∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º

### 4. –î–µ–Ω–µ–∂–Ω—ã–µ –ø–æ—Ç–æ–∫–∏
- CashTx - –∑–∞–ø–∏—Å—å –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è –¥–µ–Ω–µ–≥
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏ –ø–ª–∞—Ç–µ–∂–∞—Ö
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ –≤–∏–¥–∞–º –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –°–≤–µ—Ä–∫–∞ —Å –≤—ã–ø–∏—Å–∫–∞–º–∏ (–º–æ–¥–µ–ª—å –≥–æ—Ç–æ–≤–∞)

---

## üîÑ –ë–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã

### –ü—Ä–æ—Ü–µ—Å—Å 1: –ê—Ä–µ–Ω–¥–∞ (–ø—Ä–∏–º–µ—Ä –∏–∑ –¢–ó)

**5 —Ñ–µ–≤—Ä–∞–ª—è** - –ø–æ–ª—É—á–∏–ª–∏ —Å—á—ë—Ç –∑–∞ —è–Ω–≤–∞—Ä—å:
```
POST /api/expense-docs
{
  vendorId: "landlord-id",
  categoryId: "rent-id",
  operationDate: "2025-02-05",
  postingPeriod: "2025-01-01",  // –û—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —è–Ω–≤–∞—Ä—é!
  amount: 50000,
  status: "unpaid"
}
```

**10 —Ñ–µ–≤—Ä–∞–ª—è** - –æ–ø–ª–∞—Ç–∏–ª–∏:
```
POST /api/payments
{
  accountId: "bank-id",
  date: "2025-02-10",
  amount: 50000,
  allocations: [
    { expenseDocId: "doc-id", amount: 50000 }
  ]
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- P&L —è–Ω–≤–∞—Ä—è: —Ä–∞—Å—Ö–æ–¥ 50 000 (OPEX)
- Cash Flow —Ñ–µ–≤—Ä–∞–ª—è: –≤—ã–ø–ª–∞—Ç–∞ 50 000 (operating)
- Aging –Ω–∞ 31.01: –¥–æ–ª–≥ 50 000
- Aging –Ω–∞ 28.02: –¥–æ–ª–≥ 0

### –ü—Ä–æ—Ü–µ—Å—Å 2: –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω—ã —Å —ç–∫–≤–∞–π—Ä–∏–Ω–≥–æ–º

**1 –º–∞—Ä—Ç–∞** - –∑–∞–∫—Ä—ã–ª–∏ —Å–º–µ–Ω—É:
```
PATCH /api/shifts/{id}/close
{
  sales: [
    { 
      channelId: "dine-in", 
      tenderTypeId: "card",
      grossAmount: 120000,
      discounts: 0,
      refunds: 0
    }
  ]
}
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –°–æ–∑–¥–∞—ë—Ç—Å—è ShiftSale (120 000 –ø–æ –∫–∞—Ä—Ç–µ)
- –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å CashTx (–æ–∂–∏–¥–∞–Ω–∏–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –Ω–∞ –±–∞–Ω–∫)

**3 –º–∞—Ä—Ç–∞** - –ø–æ—Å—Ç—É–ø–∏–ª–æ –Ω–∞ –±–∞–Ω–∫:
- –í—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –≤—ã–ø–∏—Å–∫—É –∏–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
- 118 800 (–ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ) + 1 200 (–∫–æ–º–∏—Å—Å–∏—è –±–∞–Ω–∫–∞)

---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### Backend:
```bash
cd server
npm install
npx prisma generate
npx tsx scripts/seed-finance-v3.ts  # –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
npm run dev  # –∏–ª–∏ node dist/index.js
```

### Frontend:
```bash
cd client
npm install
npm run dev
```

### –ü–æ—Ä—Ç—ã:
- Backend: http://localhost:4000
- Frontend: http://localhost:3000

---

## üìã –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### üü° –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã:

1. **Cash Flow —É–ª—É—á—à–µ–Ω–Ω—ã–π** (—Ç–µ–∫—É—â–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –º–æ–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å):
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CashTx –≤–º–µ—Å—Ç–æ Transaction
   - –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–π/–∫–æ–Ω–µ—á–Ω—ã–π –æ—Å—Ç–∞—Ç–∫–∏
   - –ò—Å–∫–ª—é—á–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã –∏–∑ –∏—Ç–æ–≥–æ–≤

2. **–°–≤–µ—Ä–∫–∞ –±–∞–Ω–∫–∞** (–º–æ–¥–µ–ª–∏ –≥–æ—Ç–æ–≤—ã, –Ω—É–∂–µ–Ω UI):
   - –ò–º–ø–æ—Ä—Ç –≤—ã–ø–∏—Å–∫–∏
   - –ê–≤—Ç–æ—Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å CashTx
   - –†—É—á–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞

3. **–ó–∞–∫—Ä—ã—Ç–∏–µ –ø–µ—Ä–∏–æ–¥–∞**:
   - Lock posting_period
   - –ó–∞–ø—Ä–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞–∫—Ä—ã—Ç—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤

4. **–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è CashTx –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–º–µ–Ω**:
   - –°–µ–π—á–∞—Å CashTx —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ –ø–ª–∞—Ç–µ–∂–∞—Ö
   - –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–º–µ–Ω—ã (–ø–æ —Å–ø–æ—Å–æ–±–∞–º –æ–ø–ª–∞—Ç—ã)

5. **UI –¥–ª—è kind –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö**:
   - API –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç
   - –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–ª–µ–∫—Ç –≤ —Ñ–æ—Ä–º—É –∫–∞—Ç–µ–≥–æ—Ä–∏–π

### ‚ùå –ò—Å–∫–ª—é—á–µ–Ω–æ (–ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é):
- PayoutRegister/PayoutRegisterLine (—Ä–µ–µ—Å—Ç—Ä—ã –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–æ–≤)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–≤–µ—Ä–∫–∞ —Å –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–∞–º–∏

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ v3

### vs v2 (—Ç–µ–∫—É—â–∞—è Transaction-based):

**1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤ –∏ –¥–µ–Ω–µ–≥:**
- v2: Transaction = –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ = –¥–µ–Ω—å–≥–∏ (–ø—É—Ç–∞–Ω–∏—Ü–∞)
- v3: ExpenseDoc (–¥–æ–ª–≥) ‚Üí Payment (–æ–ø–ª–∞—Ç–∞) ‚Üí CashTx (–¥–µ–Ω—å–≥–∏)

**2. –£—á—ë—Ç –¥–æ–ª–≥–æ–≤:**
- v2: –Ω–µ—Ç —É—á—ë—Ç–∞ –Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤
- v3: —Å—Ç–∞—Ç—É—Å—ã, —á–∞—Å—Ç–∏—á–Ω–∞—è –æ–ø–ª–∞—Ç–∞, aging report

**3. –î–≤–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏:**
- v2: —Ç–æ–ª—å–∫–æ paymentDate
- v3: operation_date (—Ñ–∞–∫—Ç) + posting_period (—É—á—ë—Ç)
  
**–ü—Ä–∏–º–µ—Ä:** –ê—Ä–µ–Ω–¥–∞ –∑–∞ —è–Ω–≤–∞—Ä—å (p_period=01.2025), –æ–ø–ª–∞—á–µ–Ω–Ω–∞—è –≤ —Ñ–µ–≤—Ä–∞–ª–µ (o_date=02.2025):
- P&L —è–Ω–≤–∞—Ä—è: —Ä–∞—Å—Ö–æ–¥ 50–ö
- Cash Flow —Ñ–µ–≤—Ä–∞–ª—è: –≤—ã–ø–ª–∞—Ç–∞ 50–ö

**4. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π P&L:**
- v2: –ø—Ä–æ—Å—Ç–æ –¥–æ—Ö–æ–¥—ã ‚àí —Ä–∞—Å—Ö–æ–¥—ã
- v3: –í—ã—Ä—É—á–∫–∞ ‚Üí COGS ‚Üí –í–∞–ª–æ–≤–∞—è ‚Üí OPEX ‚Üí –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è ‚Üí –ß–∏—Å—Ç–∞—è

**5. –°–º–µ–Ω—ã –∏ –ø—Ä–æ–¥–∞–∂–∏:**
- v2: –Ω–µ—Ç –º–æ–¥—É–ª—è
- v3: –ø–æ–ª–Ω—ã–π —É—á—ë—Ç —Å–º–µ–Ω —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π

---

## üìö –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

```
server/
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma              ‚Üê –í—Å–µ –º–æ–¥–µ–ª–∏ v3
‚îÇ   ‚îî‚îÄ‚îÄ migrations/
‚îÇ       ‚îî‚îÄ‚îÄ 20251001120000_add_finance_v3_models/
‚îÇ           ‚îî‚îÄ‚îÄ migration.sql      ‚Üê –ú–∏–≥—Ä–∞—Ü–∏—è v3
‚îú‚îÄ‚îÄ src/modules/
‚îÇ   ‚îú‚îÄ‚îÄ channels/router.ts         ‚Üê NEW
‚îÇ   ‚îú‚îÄ‚îÄ tender-types/router.ts     ‚Üê NEW
‚îÇ   ‚îú‚îÄ‚îÄ shifts/router.ts           ‚Üê NEW
‚îÇ   ‚îú‚îÄ‚îÄ expense-docs/router.ts     ‚Üê NEW
‚îÇ   ‚îú‚îÄ‚îÄ payments/router.ts         ‚Üê NEW
‚îÇ   ‚îú‚îÄ‚îÄ categories/router.ts       ‚Üê UPDATED (kind)
‚îÇ   ‚îî‚îÄ‚îÄ reports/router.ts          ‚Üê UPDATED (aging, pnl, shift-summary)
‚îî‚îÄ‚îÄ scripts/
    ‚îî‚îÄ‚îÄ seed-finance-v3.ts         ‚Üê Seed –¥–∞–Ω–Ω—ã–µ

client/src/app/(dashboard)/
‚îú‚îÄ‚îÄ shifts/                        ‚Üê NEW
‚îÇ   ‚îî‚îÄ‚îÄ ui/ShiftsClient.tsx
‚îú‚îÄ‚îÄ finance/
‚îÇ   ‚îú‚îÄ‚îÄ expense-docs/              ‚Üê NEW
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui/ExpenseDocsClient.tsx
‚îÇ   ‚îú‚îÄ‚îÄ payments/                  ‚Üê NEW
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui/PaymentsClient.tsx
‚îÇ   ‚îî‚îÄ‚îÄ reports/
‚îÇ       ‚îú‚îÄ‚îÄ pnl/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ ui/PnlClient.tsx   ‚Üê UPDATED
‚îÇ       ‚îî‚îÄ‚îÄ aging/                 ‚Üê NEW
‚îÇ           ‚îî‚îÄ‚îÄ ui/AgingClient.tsx
‚îî‚îÄ‚îÄ components/sidebar.tsx         ‚Üê UPDATED (–º–µ–Ω—é)
```

---

## üß™ –¢–µ—Å—Ç-–∫–µ–π—Å—ã (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏)

### ‚úÖ –¢–µ—Å—Ç 1: –ê—Ä–µ–Ω–¥–∞ —Å –¥–æ–ª–≥–æ–º
1. –°–æ–∑–¥–∞—Ç—å ExpenseDoc: op=05.02, pp=01.2025, 50–ö, unpaid
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Aging –Ω–∞ 31.01: –¥–æ–ª–≥ 50–ö –≤ bucket 0-30
3. –û–ø–ª–∞—Ç–∏—Ç—å 10.02
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å P&L —è–Ω–≤–∞—Ä—è: OPEX —Å–æ–¥–µ—Ä–∂–∏—Ç 50–ö
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Cash Flow —Ñ–µ–≤—Ä–∞–ª—è: out 50–ö (operating)
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Aging: –¥–æ–ª–≥ 0

### ‚úÖ –¢–µ—Å—Ç 2: –°–º–µ–Ω–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∫–∞–Ω–∞–ª–∞–º–∏
1. –û—Ç–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É
2. –ó–∞–∫—Ä—ã—Ç—å —Å –ø—Ä–æ–¥–∞–∂–∞–º–∏:
   - Dine-in, –∫–∞—Ä—Ç–∞: 100–ö
   - Pickup, –Ω–∞–ª–∏—á–Ω—ã–µ: 50–ö
   - Grab, –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä: 30–ö
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Ç–æ–≥–∏: –Ω–µ—Ç—Ç–æ 180–ö, –Ω–∞–ª–∏—á–Ω—ã—Ö –∫ –∏–Ω–∫–∞—Å—Å–∞—Ü–∏–∏ 50–ö
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å P&L: –≤—ã—Ä—É—á–∫–∞ –ø–æ –∫–∞–Ω–∞–ª–∞–º

### ‚úÖ –¢–µ—Å—Ç 3: –ß–∞—Å—Ç–∏—á–Ω–∞—è –æ–ø–ª–∞—Ç–∞
1. –°–æ–∑–¥–∞—Ç—å ExpenseDoc –Ω–∞ 100–ö
2. –û–ø–ª–∞—Ç–∏—Ç—å 40–ö ‚Üí —Å—Ç–∞—Ç—É—Å = partial, –æ—Å—Ç–∞—Ç–æ–∫ 60–ö
3. –û–ø–ª–∞—Ç–∏—Ç—å –µ—â—ë 60–ö ‚Üí —Å—Ç–∞—Ç—É—Å = paid, –æ—Å—Ç–∞—Ç–æ–∫ 0

### ‚úÖ –¢–µ—Å—Ç 4: –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
1. –°–æ–∑–¥–∞—Ç—å 3 –¥–æ–∫—É–º–µ–Ω—Ç–∞: 30–ö, 50–ö, 20–ö
2. –°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç—ë–∂ 100–ö —Å allocations:
   - –î–æ–∫—É–º–µ–Ω—Ç 1: 30–ö (–∑–∞–∫—Ä—ã—Ç)
   - –î–æ–∫—É–º–µ–Ω—Ç 2: 50–ö (–∑–∞–∫—Ä—ã—Ç)
   - –î–æ–∫—É–º–µ–Ω—Ç 3: 20–ö (–∑–∞–∫—Ä—ã—Ç)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Å—Ç–∞—Ç—É—Å—ã = paid

---

## üìä –ü—Ä–∏–º–µ—Ä –æ—Ç—á—ë—Ç–∞ P&L

**–Ø–Ω–≤–∞—Ä—å 2025:**

| –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å | –°—É–º–º–∞ |
|---|---:|
| **–í–´–†–£–ß–ö–ê (–Ω–µ—Ç—Ç–æ)** | **900 000 ‚ÇΩ** |
| ‚Äî Dine-in | 500 000 ‚ÇΩ |
| ‚Äî Pickup | 200 000 ‚ÇΩ |
| ‚Äî Grab | 150 000 ‚ÇΩ |
| ‚Äî Foodpanda | 50 000 ‚ÇΩ |
| **–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å (COGS)** | **‚àí360 000 ‚ÇΩ** |
| ‚Äî –ú—è—Å–æ –∏ —Ä—ã–±–∞ | ‚àí150 000 ‚ÇΩ |
| ‚Äî –û–≤–æ—â–∏ | ‚àí80 000 ‚ÇΩ |
| ‚Äî –ú–æ–ª–æ—á–∫–∞ | ‚àí70 000 ‚ÇΩ |
| ‚Äî –£–ø–∞–∫–æ–≤–∫–∞ | ‚àí60 000 ‚ÇΩ |
| **= –í–ê–õ–û–í–ê–Ø –ü–†–ò–ë–´–õ–¨** | **540 000 ‚ÇΩ** |
| **–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã (OPEX)** | **‚àí320 000 ‚ÇΩ** |
| ‚Äî –ê—Ä–µ–Ω–¥–∞ | ‚àí50 000 ‚ÇΩ |
| ‚Äî –ó–∞—Ä–ø–ª–∞—Ç–∞ | ‚àí200 000 ‚ÇΩ |
| ‚Äî –ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ | ‚àí40 000 ‚ÇΩ |
| ‚Äî –ü—Ä–æ—á–µ–µ | ‚àí30 000 ‚ÇΩ |
| **= –û–ü–ï–†–ê–¶–ò–û–ù–ù–ê–Ø –ü–†–ò–ë–´–õ–¨** | **220 000 ‚ÇΩ** |
| **–ö–æ–º–∏—Å—Å–∏–∏** | **‚àí10 000 ‚ÇΩ** |
| **= –ß–ò–°–¢–ê–Ø –ü–†–ò–ë–´–õ–¨** | **210 000 ‚ÇΩ** |

---

## üéÅ –ë–æ–Ω—É—Å—ã

- ‚úÖ –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞—Ñ–µ)
- ‚úÖ RBAC (—Ä–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞)
- ‚úÖ Audit logs (–æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- ‚úÖ iiko –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–≥–æ—Ç–æ–≤–∞ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞)
- ‚úÖ Google Sheets –∏–º–ø–æ—Ä—Ç
- ‚úÖ –ö—Ä–∞—Å–∏–≤—ã–π UI —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤—ë—Ä—Å—Ç–∫–∞

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `docs/accaunting.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –¢–ó
- `docs/finance-implementation-checklist.md` - —á–µ–∫-–ª–∏—Å—Ç (18/20 ‚úÖ)
- `docs/finance.md` - —Å—Ç–∞—Ä–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è v1
- `docs/finance-improvements.md` - –∑–∞–º–µ—Ç–∫–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—è–º

---

## üë®‚Äçüíª –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–°—Ç–µ–∫:**
- Backend: Node.js + Express + TypeScript
- ORM: Prisma (SQLite –≤ dev, –º–æ–∂–Ω–æ PostgreSQL –≤ prod)
- Frontend: Next.js 14 + React
- UI: Tailwind CSS + shadcn/ui
- –í–∞–ª–∏–¥–∞—Ü–∏—è: Zod

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- 10 –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü
- 15+ –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- Foreign keys –∏ constraints
- Audit fields (createdBy, updatedBy)

**Git:**
- 4 –∫–æ–º–º–∏—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- 196 —Ñ–∞–π–ª–æ–≤ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –º–∏–≥—Ä–∞—Ü–∏–π

---

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å iiko

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç —Å–º–µ–Ω ‚úÖ

**–í–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞** —Å–º–µ–Ω—ã –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –∏–∑ iiko –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ß–µ–∫–∏ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ `IikoReceipt` (—á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∏–º–ø–æ—Ä—Ç)
2. –°–∫—Ä–∏–ø—Ç –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç —á–µ–∫–∏ –ø–æ –¥–∞—Ç–∞–º
3. –°–æ–∑–¥–∞—ë—Ç `Shift` + `ShiftSale` —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π:
   - –ö–∞–Ω–∞–ª—ã: Dine-in, Pickup, Grab (–∏–∑ orderType + deliveryServiceType)
   - –°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã: –ù–∞–ª–∏—á–Ω—ã–µ, –ö–∞—Ä—Ç–∞, QR, –ë–æ–Ω—É—Å—ã (–∏–∑ payTypesJson)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è —Å—É–º–º

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- **UI:** `/shifts` ‚Üí –∫–Ω–æ–ø–∫–∞ "–ò–º–ø–æ—Ä—Ç –∏–∑ iiko" (–∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π)
- **CLI:** `npx tsx scripts/import-shifts-from-iiko.ts "2025-09-01" "2025-10-01"`
- **API:** `POST /api/iiko/import/shifts { fromDate, toDate }`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Å–º–µ–Ω—ã —Å —Ç–æ—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —á–µ–∫–æ–≤!

üìö –ü–æ–¥—Ä–æ–±–Ω–µ–µ: `docs/iiko-shifts-integration.md`

---

**üéä –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
2. ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–º–µ–Ω—ã –∏–∑ iiko (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!)
3. ‚è≥ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
4. ‚è≥ –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å Cash Flow –∏ —Å–≤–µ—Ä–∫—É –±–∞–Ω–∫–∞

