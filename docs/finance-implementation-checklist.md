# –ß–µ–∫-–ª–∏—Å—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Cafe Finance Lite v3

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- [x] –ë–∞–∑–æ–≤—ã–µ —Å—á–µ—Ç–∞ (Account) —Å —Ç–∏–ø–∞–º–∏: cash/bank/card/safe
- [x] –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ (Category) —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π –∏ –≤–∏–¥–∞–º–∏ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (OPERATING/INVESTING/FINANCING)
- [x] –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (Transaction) —Å —Ç–∏–ø–∞–º–∏: expense/income/transfer/adjustment
- [x] –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã (Counterparty)
- [x] –í—ã–ø–∏—Å–∫–∏ (Statement) —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ —Å—Ç—Ä–æ–∫–∞–º
- [x] –ë–∞–∑–æ–≤—ã–π Cash Flow —Å —Ä–∞–∑–±–∏–≤–∫–æ–π –ø–æ –≤–∏–¥–∞–º –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [x] –ë–∞–∑–æ–≤—ã–π P&L –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è
- [x] –ë–∞–ª–∞–Ω—Å—ã –ø–æ —Å—á–µ—Ç–∞–º
- [x] –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ Google Sheets

---

## üî¥ –ó–∞–¥–∞—á–∏ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

#### 1.1 –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∂
- [x] **–°–æ–∑–¥–∞—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–∞–Ω–∞–ª–æ–≤ –ø—Ä–æ–¥–∞–∂ (Channel)**
  - –ü–æ–ª—è: id, name
  - –ü—Ä–∏–º–µ—Ä—ã: 'Dine-in', 'Pickup', 'Grab', 'Foodpanda'
  - –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î ‚úÖ
  - API endpoints (CRUD) ‚úÖ
  - UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚è≥

- [x] **–°–æ–∑–¥–∞—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å–ø–æ—Å–æ–±–æ–≤ –æ–ø–ª–∞—Ç—ã (TenderType)**
  - –ü–æ–ª—è: id, name
  - –ü—Ä–∏–º–µ—Ä—ã: 'cash', 'card', 'qr'
  - –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î ‚úÖ
  - API endpoints (CRUD) ‚úÖ
  - UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚è≥

#### 1.2 –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ä–∞—Å—Ö–æ–¥–æ–≤
- [x] **–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ kind –≤ Category**
  - –ó–Ω–∞—á–µ–Ω–∏—è: 'COGS', 'OPEX', 'CAPEX', 'TAX', 'FEE', 'OTHER' ‚úÖ
  - –ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—è ‚úÖ
  - –û–±–Ω–æ–≤–∏—Ç—å API –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ kind ‚úÖ
  - –û–±–Ω–æ–≤–∏—Ç—å UI —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π ‚è≥
  - –ü—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ‚úÖ

#### 1.3 –ú–æ–¥—É–ª—å —Å–º–µ–Ω
- [x] **–°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å Shift**
  - –ü–æ–ª—è: id, open_at, close_at, opened_by, closed_by, note ‚úÖ
  - –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î ‚úÖ
  - –°–≤—è–∑—å —Å tenant ‚úÖ

- [x] **–°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å ShiftSale**
  - –ü–æ–ª—è: id, shift_id, channel_id, tender_type_id, gross_amount, discounts, refunds ‚úÖ
  - –°–≤—è–∑–∏: Shift, Channel, TenderType ‚úÖ
  - –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î ‚úÖ

- [x] **API –¥–ª—è —Å–º–µ–Ω**
  - POST /api/shifts (—Å–æ–∑–¥–∞–Ω–∏–µ/–æ—Ç–∫—Ä—ã—Ç–∏–µ) ‚úÖ
  - PATCH /api/shifts/:id/close (–∑–∞–∫—Ä—ã—Ç–∏–µ) ‚úÖ
  - GET /api/shifts (—Å–ø–∏—Å–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏) ‚úÖ
  - GET /api/shifts/:id (–¥–µ—Ç–∞–ª–∏ —Å –ø—Ä–æ–¥–∞–∂–∞–º–∏) ‚úÖ

#### 1.4 –°–∏—Å—Ç–µ–º–∞ —É—á—ë—Ç–∞ –¥–æ–ª–≥–æ–≤
- [x] **–°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å ExpenseDoc (–¥–æ–∫—É–º–µ–Ω—Ç—ã —Ä–∞—Å—Ö–æ–¥–æ–≤)**
  - –ü–æ–ª—è:
    - id, tenant_id, vendor_id, expense_category_id ‚úÖ
    - operation_date (DATE) - –¥–∞—Ç–∞ —Å—á—ë—Ç–∞/–∞–∫—Ç–∞ ‚úÖ
    - posting_period (DATE) - 1-–µ —á–∏—Å–ª–æ –º–µ—Å—è—Ü–∞ —É—á—ë—Ç–∞ ‚úÖ
    - amount - —Å—É–º–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ ‚úÖ
    - paid_amount - —Å—É–º–º–∞—Ä–Ω–æ –æ–ø–ª–∞—á–µ–Ω–æ (–≤—ã—á–∏—Å–ª—è–µ–º–æ–µ) ‚úÖ
    - status - 'draft'|'unpaid'|'partial'|'paid'|'void' ‚úÖ
    - activity - –≤–∏–¥ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏) ‚úÖ
    - memo ‚úÖ
  - –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î ‚úÖ
  - –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ posting_period, status ‚úÖ

- [x] **–°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å Payment (–ø–ª–∞—Ç–µ–∂–∏)**
  - –ü–æ–ª—è:
    - id, expense_doc_id (nullable), money_account_id ‚úÖ
    - date (DATE) ‚úÖ
    - amount ‚úÖ
    - activity (nullable - –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è) ‚úÖ
    - memo ‚úÖ
  - –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î ‚úÖ
  - –ï—Å–ª–∏ expense_doc_id –ø—É—Å—Ç ‚Üí —Ä–∞–∑–æ–≤—ã–π –ø–ª–∞—Ç—ë–∂ (–∫–æ–º–∏—Å—Å–∏—è –±–∞–Ω–∫–∞ –∏ —Ç.–ø.) ‚úÖ

- [x] **–°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å PaymentAllocation (—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π)**
  - –ü–æ–ª—è: id, payment_id, expense_doc_id, amount ‚úÖ
  - –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î ‚úÖ
  - –î–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ ‚úÖ

- [x] **API –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Ä–∞—Å—Ö–æ–¥–æ–≤**
  - POST /api/expense-docs (—Å–æ–∑–¥–∞–Ω–∏–µ) ‚úÖ
  - PATCH /api/expense-docs/:id (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —Å–º–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–∞) ‚úÖ
  - GET /api/expense-docs (—Å–ø–∏—Å–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –ø–æ —Å—Ç–∞—Ç—É—Å—É, –ø–æ—Å—Ç–∞–≤—â–∏–∫—É, –ø–µ—Ä–∏–æ–¥—É) ‚úÖ
  - DELETE /api/expense-docs/:id (void) ‚úÖ

- [x] **API –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π**
  - POST /api/payments (—Å–æ–∑–¥–∞–Ω–∏–µ —Å allocations) ‚úÖ
  - GET /api/payments (—Å–ø–∏—Å–æ–∫) ‚úÖ
  - DELETE /api/payments/:id (–æ—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–∞ —Å –ø–µ—Ä–µ—Å—á—ë—Ç–æ–º paid_amount) ‚úÖ

#### 1.5 –î–µ–Ω–µ–∂–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- [x] **–°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å CashTx (—Ä–µ–∞–ª—å–Ω—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è –¥–µ–Ω–µ–≥)**
  - –ü–æ–ª—è:
    - id, money_account_id, date (DATE) ‚úÖ
    - direction - 'in'|'out' ‚úÖ
    - amount ‚úÖ
    - source_type - 'shift'|'payment'|'bank_fee'|'transfer' ‚úÖ
    - source_id ‚úÖ
    - memo ‚úÖ
    - activity - 'operating'|'investing'|'financing' ‚úÖ
    - matched_statement_line_id (–¥–ª—è —Å–≤–µ—Ä–∫–∏) ‚úÖ
  - –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î ‚úÖ
  - –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ date, activity, direction ‚úÖ

- [x] **–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è CashTx**
  - –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–º–µ–Ω—ã ‚Üí cash_tx –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã ‚è≥
  - –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–ª–∞—Ç–µ–∂–∞ ‚Üí cash_tx(out) ‚úÖ
  - –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –≤—ã–ø–ª–∞—Ç—ã ‚Üí cash_tx(in) ‚è≥
  - –¢—Ä–∏–≥–≥–µ—Ä—ã –∏–ª–∏ —Å–µ—Ä–≤–∏—Å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–≤ API) ‚úÖ

#### 1.6 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å iiko
- [x] **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç —Å–º–µ–Ω –∏–∑ —á–µ–∫–æ–≤**
  - –°–∫—Ä–∏–ø—Ç –∏–º–ø–æ—Ä—Ç–∞ –∏–∑ IikoReceipt ‚úÖ
  - –ú–∞–ø–ø–∏–Ω–≥ orderType/deliveryServiceType ‚Üí Channel ‚úÖ
  - –ú–∞–ø–ø–∏–Ω–≥ payTypes ‚Üí TenderType ‚úÖ
  - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–∞–º ‚úÖ
  - –ê–≥—Ä–µ–≥–∞—Ü–∏—è –ø–æ channel √ó tender ‚úÖ
  - API endpoint POST /api/iiko/import/shifts ‚úÖ
  - UI –∫–Ω–æ–ø–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ ‚úÖ
  - –¢–∞–±–ª–∏—Ü–∞ —Å–≤–µ—Ä–∫–∏ —á–µ–∫–æ–≤ vs —Å–º–µ–Ω ‚úÖ

#### 1.7 –°–≤–µ—Ä–∫–∞ –±–∞–Ω–∫–∞
- [ ] **–†–∞—Å—à–∏—Ä–∏—Ç—å BankStatementLine**
  - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ matched_cash_tx_id (—Å–≤—è–∑—å —Å CashTx)
  - –°—Ç–∞—Ç—É—Å —Å–≤–µ—Ä–∫–∏: 'unmatched'|'auto_matched'|'manually_matched'

- [ ] **API –¥–ª—è —Å–≤–µ—Ä–∫–∏**
  - POST /api/statements/import (–∏–º–ø–æ—Ä—Ç –≤—ã–ø–∏—Å–∫–∏)
  - POST /api/statements/:id/auto-match (–∞–≤—Ç–æ—Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ)
  - PATCH /api/statements/lines/:id/match (—Ä—É—á–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞)

---

### –≠—Ç–∞–ø 2: –û—Ç—á—ë—Ç—ã

#### 2.1 –û—Ç—á—ë—Ç P&L (—É–ª—É—á—à–µ–Ω–Ω—ã–π)
- [x] **–î–æ—Ä–∞–±–æ—Ç–∞—Ç—å P&L —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π**
  - –í—ã—Ä—É—á–∫–∞ (–Ω–µ—Ç—Ç–æ) = Œ£ shift_sale –ø–æ posting_period ‚úÖ
  - COGS (—Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å) = Œ£ expense_doc –≥–¥–µ kind='COGS' ‚úÖ
  - –í–∞–ª–æ–≤–∞—è –ø—Ä–∏–±—ã–ª—å = –í—ã—Ä—É—á–∫–∞ ‚àí COGS ‚úÖ
  - OPEX = Œ£ expense_doc –≥–¥–µ kind='OPEX' ‚úÖ
  - –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –ø—Ä–∏–±—ã–ª—å = –í–∞–ª–æ–≤–∞—è ‚àí OPEX ‚úÖ
  - –ü—Ä–æ—á–∏–µ —Ä–∞—Å—Ö–æ–¥—ã/–¥–æ—Ö–æ–¥—ã (TAX, FEE, OTHER) ‚úÖ
  - –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å ‚úÖ

- [x] **–†–∞–∑—Ä–µ–∑—ã P&L**
  - –ü–æ –∫–∞–Ω–∞–ª–∞–º –ø—Ä–æ–¥–∞–∂ ‚úÖ
  - –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º —Ä–∞—Å—Ö–æ–¥–æ–≤ (kind) ‚úÖ
  - –ü–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º (top-N) ‚úÖ
  - –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel/CSV ‚è≥

#### 2.2 –û—Ç—á—ë—Ç Cash Flow (—É–ª—É—á—à–µ–Ω–Ω—ã–π)
- [ ] **–î–æ—Ä–∞–±–æ—Ç–∞—Ç—å Cash Flow**
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CashTx –≤–º–µ—Å—Ç–æ Transaction
  - –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–π –æ—Å—Ç–∞—Ç–æ–∫ –ø–æ —Å—á–µ—Ç–∞–º
  - –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω–µ—á–Ω—ã–π –æ—Å—Ç–∞—Ç–æ–∫
  - –ò—Å–∫–ª—é—á–∏—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã –∏–∑ –∏—Ç–æ–≥–æ–≤ (–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–æ)
  - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞:
    - –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è/–≤—ã–ø–ª–∞—Ç—ã)
    - –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω–∞—è –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å
    - –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å
  - –ò—Ç–æ–≥–æ–≤—ã–π Net CF = —Å—É–º–º–∞ –ø–æ —Ç—Ä—ë–º –±–ª–æ–∫–∞–º

- [ ] **–§–∏–ª—å—Ç—Ä—ã Cash Flow**
  - –ü–æ —Å—á–µ—Ç–∞–º
  - –ü–æ –ø–µ—Ä–∏–æ–¥—É (–ø–æ–º–µ—Å—è—á–Ω–æ –∏–ª–∏ –∑–∞ –¥–∏–∞–ø–∞–∑–æ–Ω)
  - –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel/CSV

#### 2.3 –û—Ç—á—ë—Ç Aging (–¥–æ–ª–≥–∏)
- [x] **–°–æ–∑–¥–∞—Ç—å –æ—Ç—á—ë—Ç Aging**
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: as_of_date, vendor?, category? ‚úÖ
  - –ö–æ–ª–æ–Ω–∫–∏:
    - –ü–æ—Å—Ç–∞–≤—â–∏–∫ ‚úÖ
    - –î–æ–∫—É–º–µ–Ω—Ç (‚Ññ/–¥–∞—Ç–∞ operation_date) ‚úÖ
    - Posting Period (YYYY-MM) ‚úÖ
    - –°—É–º–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ ‚úÖ
    - –û–ø–ª–∞—á–µ–Ω–æ ‚úÖ
    - –û—Å—Ç–∞—Ç–æ–∫ –¥–æ–ª–≥–∞ ‚úÖ
    - –í–æ–∑—Ä–∞—Å—Ç –¥–æ–ª–≥–∞ (bucket): 0‚Äì30 / 31‚Äì60 / 61‚Äì90 / 90+ ‚úÖ
  - –ò—Ç–æ–≥–∏ –ø–æ bucket'–∞–º ‚úÖ
  - API endpoint GET /api/reports/aging ‚úÖ

- [ ] **UI –¥–ª—è –æ—Ç—á—ë—Ç–∞ Aging**
  - –¢–∞–±–ª–∏—Ü–∞ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º ‚è≥
  - –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –ø–æ —Å—Ä–æ–∫–∞–º ‚è≥
  - –§–∏–ª—å—Ç—Ä—ã –∏ —ç–∫—Å–ø–æ—Ä—Ç ‚è≥

#### 2.4 –î–Ω–µ–≤–Ω–∞—è —Å–≤–æ–¥–∫–∞ –ø–æ —Å–º–µ–Ω–∞–º
- [x] **–°–æ–∑–¥–∞—Ç—å –æ—Ç—á—ë—Ç –ø–æ —Å–º–µ–Ω–∞–º**
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: date –∏–ª–∏ –¥–∏–∞–ø–∞–∑–æ–Ω ‚úÖ
  - –ö–æ–ª–æ–Ω–∫–∏:
    - –î–∞—Ç–∞/–°–º–µ–Ω–∞ ‚úÖ
    - –ö–∞–Ω–∞–ª ‚úÖ
    - –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã ‚úÖ
    - –í—ã—Ä—É—á–∫–∞ –±—Ä—É—Ç—Ç–æ ‚úÖ
    - –°–∫–∏–¥–∫–∏ ‚úÖ
    - –í–æ–∑–≤—Ä–∞—Ç—ã ‚úÖ
    - –í—ã—Ä—É—á–∫–∞ –Ω–µ—Ç—Ç–æ ‚úÖ
    - –ù–∞–ª–∏—á–Ω—ã–µ –∫ –∏–Ω–∫–∞—Å—Å–∞—Ü–∏–∏ ‚úÖ
  - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏: –ø–æ –¥–Ω—é, –∫–∞–Ω–∞–ª—É, —Å–ø–æ—Å–æ–±—É –æ–ø–ª–∞—Ç—ã ‚úÖ
  - API endpoint GET /api/reports/shift-summary ‚úÖ

- [ ] **UI –¥–ª—è –¥–Ω–µ–≤–Ω–æ–π —Å–≤–æ–¥–∫–∏**
  - –§–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–µ ‚è≥
  - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∏ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è ‚è≥
  - –≠–∫—Å–ø–æ—Ä—Ç ‚è≥

---

### –≠—Ç–∞–ø 3: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

#### 3.1 –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω—ã
- [x] **UI –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è —Å–º–µ–Ω—ã**
  - –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ –ø–æ –º–∞—Ç—Ä–∏—Ü–µ: –∫–∞–Ω–∞–ª √ó —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã ‚úÖ
  - –ü–æ–ª—è: –±—Ä—É—Ç—Ç–æ, —Å–∫–∏–¥–∫–∏, –≤–æ–∑–≤—Ä–∞—Ç—ã ‚úÖ
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç –Ω–µ—Ç—Ç–æ ‚úÖ
  - –ü–æ–∫–∞–∑: –Ω–∞–ª –∫ –∏–Ω–∫–∞—Å—Å–∞—Ü–∏–∏, –æ–∂–∏–¥–∞–µ–º—ã–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è ‚úÖ
  - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–¥–æ—Å—Ç–∞—á–∏/–∏–∑–ª–∏—à–∫–∏) ‚úÖ
  - –ö–Ω–æ–ø–∫–∞ "–ó–∞–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É" ‚úÖ

- [x] **–ò—Å—Ç–æ—Ä–∏—è —Å–º–µ–Ω**
  - –°–ø–∏—Å–æ–∫ —Å–º–µ–Ω —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ ‚úÖ
  - –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π –∑–∞–∫—Ä—ã—Ç–æ–π —Å–º–µ–Ω—ã ‚úÖ
  - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ (–µ—Å–ª–∏ –Ω–µ –∑–∞–∫—Ä—ã—Ç –º–µ—Å—è—Ü) ‚è≥

#### 3.2 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–∞–º–∏
- [x] **UI –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Ä–∞—Å—Ö–æ–¥–æ–≤**
  - –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è ExpenseDoc:
    - –ü–æ—Å—Ç–∞–≤—â–∏–∫ (–≤—ã–±–æ—Ä/—Å–æ–∑–¥–∞–Ω–∏–µ) ‚úÖ
    - –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ä–∞—Å—Ö–æ–¥–∞ ‚úÖ
    - operation_date (–¥–∞—Ç–∞ —Å—á—ë—Ç–∞) ‚úÖ
    - posting_period (–º–µ—Å—è—Ü —É—á—ë—Ç–∞) ‚úÖ
    - –°—É–º–º–∞ ‚úÖ
    - –ó–∞–º–µ—Ç–∫–∞ ‚úÖ
  - –ö–Ω–æ–ø–∫–∏: "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å (draft)", "–ü—Ä–æ–≤–µ—Å—Ç–∏ (unpaid)" ‚úÖ
  
- [x] **–¢–∞–±–ª–∏—Ü–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Ä–∞—Å—Ö–æ–¥–æ–≤**
  - –ö–æ–ª–æ–Ω–∫–∏: ‚Ññ, –ü–æ—Å—Ç–∞–≤—â–∏–∫, –ö–∞—Ç–µ–≥–æ—Ä–∏—è, –î–∞—Ç—ã, –°—É–º–º–∞, –û–ø–ª–∞—á–µ–Ω–æ, –û—Å—Ç–∞—Ç–æ–∫, –°—Ç–∞—Ç—É—Å, –í–æ–∑—Ä–∞—Å—Ç ‚úÖ
  - –§–∏–ª—å—Ç—Ä—ã: –ø–æ —Å—Ç–∞—Ç—É—Å—É, –ø–æ—Å—Ç–∞–≤—â–∏–∫—É, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –ø–µ—Ä–∏–æ–¥—É ‚úÖ
  - –ò–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö (–∫—Ä–∞—Å–Ω—ã–º) ‚úÖ
  - –î–µ–π—Å—Ç–≤–∏—è: –ü—Ä–æ—Å–º–æ—Ç—Ä, –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –û–ø–ª–∞—Ç–∞, Void ‚úÖ

#### 3.3 –û–ø–ª–∞—Ç–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤
- [x] **UI –¥–ª—è –æ–ø–ª–∞—Ç—ã**
  - –§–æ—Ä–º–∞ Payment:
    - –î–∞—Ç–∞ –ø–ª–∞—Ç–µ–∂–∞ ‚úÖ
    - –°—á—ë—Ç –¥–µ–Ω–µ–≥ (–æ—Ç–∫—É–¥–∞ –ø–ª–∞—Ç–∏–º) ‚úÖ
    - –°—É–º–º–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ allocations) ‚úÖ
    - –ü–æ—Å—Ç–∞–≤—â–∏–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚úÖ
  - –†–∞–∑–¥–µ–ª —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (Allocations):
    - –í—ã–±–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ–ø–ª–∞—Ç—ã ‚úÖ
    - –£–∫–∞–∑–∞–Ω–∏–µ —Å—É–º–º—ã –Ω–∞ –∫–∞–∂–¥—ã–π –¥–æ–∫—É–º–µ–Ω—Ç ‚úÖ
    - –ö–Ω–æ–ø–∫–∞ "–ü–æ–ª–Ω–æ—Å—Ç—å—é" –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è ‚úÖ
    - –í–∞–ª–∏–¥–∞—Ü–∏—è: —Å—É–º–º–∞ allocations ‚â§ —Å—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞ ‚úÖ
    - –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ ‚úÖ
  - Activity (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å) ‚è≥
  - –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–ª–∞—Ç—ë–∂" ‚úÖ

- [x] **–ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π**
  - –°–ø–∏—Å–æ–∫ —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è ‚úÖ
  - –û—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–∞ —Å –ø–µ—Ä–µ—Å—á—ë—Ç–æ–º ‚úÖ

#### 3.4 –°–≤–µ—Ä–∫–∞ –±–∞–Ω–∫–∞
- [ ] **UI –∏–º–ø–æ—Ä—Ç–∞ –≤—ã–ø–∏—Å–∫–∏**
  - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ (CSV/Excel)
  - –í—ã–±–æ—Ä —Å—á—ë—Ç–∞, –ø–µ—Ä–∏–æ–¥–∞
  - –ú–∞–ø–ø–∏–Ω–≥ –∫–æ–ª–æ–Ω–æ–∫
  - –ò–º–ø–æ—Ä—Ç –≤ BankStatement/Lines

- [ ] **UI —Å–≤–µ—Ä–∫–∏**
  - –î–≤–µ –ø–∞–Ω–µ–ª–∏:
    - –°—Ç—Ä–æ–∫–∏ –≤—ã–ø–∏—Å–∫–∏ (–Ω–µ—Å–ø–∞—Ä–µ–Ω–Ω—ã–µ)
    - CashTx (–Ω–µ—Å–ø–∞—Ä–µ–Ω–Ω—ã–µ)
  - –ö–Ω–æ–ø–∫–∞ "–ê–≤—Ç–æ—Å–≤–µ—Ä–∫–∞" (–ø–æ —Å—É–º–º–µ ¬±1%, –¥–∞—Ç–µ ¬±2 –¥–Ω—è)
  - –†—É—á–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ drag-and-drop –∏–ª–∏ –∫–Ω–æ–ø–∫–∞–º–∏
  - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:
    - –î–ª—è —Å–ø–∏—Å–∞–Ω–∏–π ‚Üí —Å–æ–∑–¥–∞—Ç—å Payment
    - –î–ª—è –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–π ‚Üí —Å–æ–∑–¥–∞—Ç—å CashTx
  - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π

---

### –≠—Ç–∞–ø 4: –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

#### 4.1 –í–∞–ª–∏–¥–∞—Ü–∏–∏
- [ ] **–í–∞–ª–∏–¥–∞—Ü–∏—è posting_period**
  - –í—Å–µ–≥–¥–∞ = 1-–µ —á–∏—Å–ª–æ –º–µ—Å—è—Ü–∞
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ API
  - –ê–≤—Ç–æ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏

- [ ] **–í–∞–ª–∏–¥–∞—Ü–∏—è ExpenseDoc**
  - amount ‚â• 0
  - paid_amount –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏–∑ PaymentAllocation (–Ω–µ –≤–≤–æ–¥–∏—Ç—Å—è –≤—Ä—É—á–Ω—É—é)
  - –ù–µ–ª—å–∑—è –ø–æ–º–µ—Ç–∏—Ç—å 'paid', –µ—Å–ª–∏ paid_amount < amount
  - –°—Ç–∞—Ç—É—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: unpaid ‚Üí partial ‚Üí paid

- [ ] **–í–∞–ª–∏–¥–∞—Ü–∏—è Payment**
  - –°—É–º–º–∞ allocations ‚â§ —Å—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞
  - allocation.amount ‚â§ –æ—Å—Ç–∞—Ç–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞
  - –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–ª–∞—Ç–µ–∂–∞ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å paid_amount –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

- [ ] **–í–∞–ª–∏–¥–∞—Ü–∏—è CashTx**
  - –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ activity
  - source_type + source_id –¥–æ–ª–∂–Ω—ã —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∑–∞–ø–∏—Å—å

- [ ] **–ò–º–ø–æ—Ä—Ç –≤—ã–ø–∏—Å–∫–∏**
  - –ù–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥—É–±–ª–∏ –ø–æ (date, amount, external_ref)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ —Ñ–∞–π–ª–∞

#### 4.2 –ü—Ä–æ—Ü–µ–¥—É—Ä—ã –ø–µ—Ä–∏–æ–¥–∞
- [ ] **–ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ—Å—è—Ü–∞ (Lock Period)**
  - API endpoint POST /api/periods/lock
  - –ü–∞—Ä–∞–º–µ—Ç—Ä: lock_date (1-–µ —á–∏—Å–ª–æ –º–µ—Å—è—Ü–∞)
  - –≠—Ñ—Ñ–µ–∫—Ç: –∑–∞–ø—Ä–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≥–¥–µ posting_period ‚â§ lock_date
  - –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–æ–∫ —Ç–æ–ª—å–∫–æ –≤ —Ç–µ–∫—É—â–µ–º –ø–µ—Ä–∏–æ–¥–µ —Å –ø–æ–º–µ—Ç–∫–æ–π
  - –•—Ä–∞–Ω–µ–Ω–∏–µ lock_date –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö tenant

- [ ] **UI –∑–∞–∫—Ä—ã—Ç–∏—è –ø–µ—Ä–∏–æ–¥–∞**
  - –°–ø–∏—Å–æ–∫ –ø–µ—Ä–∏–æ–¥–æ–≤ —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏ (open/locked)
  - –ö–Ω–æ–ø–∫–∞ "–ó–∞–∫—Ä—ã—Ç—å –º–µ—Å—è—Ü" —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
  - –ü–æ–∫–∞–∑ —Å–≤–æ–¥–∫–∏ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º
  - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ—Å—Ç–∏

---

### –≠—Ç–∞–ø 5: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

#### 5.1 –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] **–ú–∏–≥—Ä–∞—Ü–∏—è Transaction ‚Üí –Ω–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**
  - –ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
  - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ ExpenseDoc + Payment + CashTx (–≥–¥–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
  - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ posting_period –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π
  - –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ —Å –æ—Ç–∫–∞—Ç–æ–º

- [ ] **–ú–∏–≥—Ä–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π**
  - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ kind –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π:
    - –ü–æ –∏–º–µ–Ω–∞–º (—ç–≤—Ä–∏—Å—Ç–∏–∫–∞)
    - –ü–æ activity
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –≤—Ä—É—á–Ω—É—é

#### 5.2 –ò–º–ø–æ—Ä—Ç –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º
- [ ] **–î–æ—Ä–∞–±–æ—Ç–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –∏–∑ iiko**
  - –ê–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ —Å–º–µ–Ω –∏–∑ —á–µ–∫–æ–≤
  - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–¥–∞–∂ –ø–æ –∫–∞–Ω–∞–ª–∞–º/—Å–ø–æ—Å–æ–±–∞–º –æ–ø–ª–∞—Ç—ã
  - –°–æ–∑–¥–∞–Ω–∏–µ CashTx

- [ ] **–î–æ—Ä–∞–±–æ—Ç–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –∏–∑ Google Sheets**
  - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ (ExpenseDoc vs Payment vs CashTx)
  - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞—Ç
  - –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –ø–æ kind

---

### –≠—Ç–∞–ø 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### 6.1 –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
- [ ] –ú–æ–¥–µ–ª–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- [ ] –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (allocations, —Å—Ç–∞—Ç—É—Å—ã)
- [ ] –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è CashTx

#### 6.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- [ ] –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: Shift ‚Üí ShiftSale ‚Üí CashTx
- [ ] –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: ExpenseDoc ‚Üí Payment ‚Üí Allocation ‚Üí CashTx
- [ ] –°–≤–µ—Ä–∫–∞ –≤—ã–ø–∏—Å–∫–∏ —Å CashTx
- [ ] –û—Ç—á—ë—Ç—ã (–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞—Å—á—ë—Ç–æ–≤)

#### 6.3 –¢–µ—Å—Ç-–∫–µ–π—Å—ã –∏–∑ –¢–ó
- [ ] **–¢–µ—Å—Ç 1: –ê—Ä–µ–Ω–¥–∞ —Å –¥–æ–ª–≥–æ–º**
  - ExpenseDoc: op=05.02, pp=01.2025, 50 000, unpaid
  - Payment 10.02 (50 000, Bank)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ P&L –Ø–Ω–≤–∞—Ä—å: —Å–æ–¥–µ—Ä–∂–∏—Ç 50 000
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ Cash Flow –§–µ–≤—Ä–∞–ª—å: out 50 000 (operating)
  - –û—Ç—á—ë—Ç Aging –Ω–∞ 31.01: –¥–æ–ª–≥ 50 000
  - –û—Ç—á—ë—Ç Aging –Ω–∞ 28.02: –¥–æ–ª–≥ 0

- [ ] **–¢–µ—Å—Ç 2: –≠–∫–≤–∞–π—Ä–∏–Ω–≥**
  - –°–º–µ–Ω–∞ 01.03: –∫–∞—Ä—Ç–∞ 120 000 ‚Üí cash_tx(in, acquirer, 120 000)
  - 03.03 –≤—ã–ø–∏—Å–∫–∞: –ø–æ—Å—Ç—É–ø–∏–ª–æ 118 800, –∫–æ–º–∏—Å—Å–∏—è 1 200
  - –ò–º–ø–æ—Ä—Ç ‚Üí cash_tx(in, bank, 118 800) + cash_tx(out, bank, 1 200)
  - Cash Flow: inflow 118 800, out 1 200

- [ ] **–¢–µ—Å—Ç 3: CAPEX**
  - –ü–æ–∫—É–ø–∫–∞ –ø–µ—á–∏ 200 000 (op=15.04, pp=04.2025, CAPEX, investing)
  - –û–ø–ª–∞—Ç–∞ 20.04
  - P&L –∞–ø—Ä–µ–ª—è: –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç CAPEX
  - Cash Flow –∞–ø—Ä–µ–ª—è: investing out 200 000

- [ ] **–¢–µ—Å—Ç 4: –ö—Ä–µ–¥–∏—Ç**
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–π–º–∞ 300 000 ‚Üí cash_tx(in, bank, financing)
  - –ü–æ–≥–∞—à–µ–Ω–∏–µ 100 000 ‚Üí cash_tx(out, bank, financing)
  - –ü—Ä–æ—Ü–µ–Ω—Ç—ã 6 000 ‚Üí ExpenseDoc + Payment ‚Üí cash_tx(out, financing)

---

## üìà –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### üî• –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (MVP):
1. –ú–æ–¥—É–ª—å —Å–º–µ–Ω –∏ –ø—Ä–æ–¥–∞–∂ (1.1, 1.3)
2. –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–≥–æ–≤ (1.4)
3. –î–µ–Ω–µ–∂–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ CashTx (1.5)
4. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞—Ç (1.6)
5. UI –∑–∞–∫—Ä—ã—Ç–∏—è —Å–º–µ–Ω—ã (3.1)
6. UI —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞–º–∏ (3.2)
7. UI –æ–ø–ª–∞—Ç—ã (3.3)
8. –£–ª—É—á—à–µ–Ω–Ω—ã–π P&L (2.1)
9. –£–ª—É—á—à–µ–Ω–Ω—ã–π Cash Flow (2.2)

### ‚ö†Ô∏è –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
10. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π (1.2)
11. –û—Ç—á—ë—Ç Aging (2.3)
12. –î–Ω–µ–≤–Ω–∞—è —Å–≤–æ–¥–∫–∞ (2.4)
13. –°–≤–µ—Ä–∫–∞ –±–∞–Ω–∫–∞ (1.7, 3.4)
14. –í–∞–ª–∏–¥–∞—Ü–∏–∏ (4.1)

### üìå –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–ø–æ—Å–ª–µ MVP):
15. –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–µ—Ä–∏–æ–¥–∞ (4.2)
16. –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (5.1)
17. –î–æ—Ä–∞–±–æ—Ç–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ (5.2)
18. –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (6.1-6.3)

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –ò—Å–∫–ª—é—á–µ–Ω–æ –∏–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
- ‚ùå PayoutRegister/PayoutRegisterLine (—Ä–µ–µ—Å—Ç—Ä—ã –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–æ–≤)
- ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–≤–µ—Ä–∫–∞ —Å –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–∞–º–∏
- ‚ùå UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–ø–ª–∞—Ç–∞–º–∏ –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–æ–≤

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- SQLite ‚Üí —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ PostgreSQL –¥–ª—è production
- –í—Å–µ —Å—É–º–º—ã –≤ –∫–æ–ø–µ–π–∫–∞—Ö (INT)
- –î–∞—Ç—ã –≤ UTC
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (tenantId)
- –ê—É–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (createdBy, updatedBy)

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- Prisma (ORM)
- Next.js (Frontend)
- Express (Backend API)
- Zod (–≤–∞–ª–∏–¥–∞—Ü–∏—è)

---

**–°—Ç–∞—Ç—É—Å:** –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 01.10.2025

