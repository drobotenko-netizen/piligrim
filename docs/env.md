### Переменные окружения (сервер)

Создайте файл `server/.env` со значениями:

ALLOWED_ORIGINS=http://localhost:3000
AUTH_JWT_SECRET=<генерировать-256-бит-секрет>
MAGIC_LINK_SECRET=<генерировать-256-бит-секрет>
SERVER_PUBLIC_URL=http://localhost:4000
FRONTEND_BASE_URL=http://localhost:3000
TELEGRAM_BOT_TOKEN=<ваш-токен-бота>
TELEGRAM_WEBHOOK_SECRET=<set-your-random-secret>
TELEGRAM_POLLING=1

Примечание по Telegram:
- Для локальной разработки включите `TELEGRAM_POLLING=1` (long polling), вебхук не нужен.
- Для продакшена можно настроить webhook и выключить polling.
IIKO_HOST=piligrim-arsenev-co.iiko.it
IIKO_LOGIN=drobotenko
# Либо плейн-пароль, либо SHA1 (только один из вариантов)
IIKO_PASS=Cxd8hj97yGH
# IIKO_PASS_SHA1=9c06db3576d98d3abddccbe2a801665c370c566b

Примечание: храните секреты вне Git. Для локальной разработки достаточно `.env` в папке `server`.

### Настройка авторизации через Telegram бота

1) Создайте Telegram бота через @BotFather и получите токен
2) Установите `TELEGRAM_BOT_TOKEN` в переменные окружения
3) Для локальной разработки включите `TELEGRAM_POLLING=1`
4) Пользователи привязываются к боту через команду `/start <код_привязки>`
5) После привязки пользователи могут получить ссылку для входа командой `/login`
6) Ссылки действуют 15 минут и автоматически авторизуют пользователя в системе

### Процесс авторизации

1. Администратор создает пользователя в системе
2. Администратор генерирует код привязки для пользователя
3. Пользователь отправляет `/start <код_привязки>` боту
4. Пользователь отправляет `/login` боту для получения ссылки входа
5. Пользователь переходит по ссылке и автоматически авторизуется

